---
layout: post
comments: true
categories: SQlite
---

    QSqlDatabase db=QSqlDatabase::addDatabase("QSQLITE");
    db.setDatabaseName("sql.db");
    QSqlQuery query;
    query.exec("create table student(id int primary key,name varchar(20))");
    QTime *timer=new QTime;
    timer->start();
    if(query.at()<100000){
      db.transaction();   //开始一个事务
      query.prepare("insert into student values(?,?)");
      QVariantList uid,uname;
      for(int i=1;i<100000;i++)
      {
        uid<<i;
        uname<<QString("%1").arg(qrand());
      }
      qDebug()<<"ready!now";
      query.addBindValue(uid);
      query.addBindValue(uname);
      query.execBatch();

      db.commit();    //提交
    }
    qDebug()<<timer->elapsed();
